# Telegram Echo Bot

Простой эхо-бот для Telegram, развернутый на Amvera.

## Описание

Этот бот повторяет все текстовые сообщения, которые ему отправляют. Основан на библиотеке python-telegram-bot.

## Функции

- `/start` - Начать работу с ботом
- `/help` - Показать справку
- Эхо всех текстовых сообщений

## ⚠️ ВАЖНО: Конфигурация amvera.yaml

Для успешного развертывания на Amvera файл `amvera.yaml` должен быть **точно таким**:

```yaml
meta:
  environment: python
  toolchain:
    name: pip
    version: 3.8
build:
  requirementsPath: requirements.txt
run:
  scriptName: echobot.py
  persistenceMount: /data
  containerPort: 80
```

### Ключевые моменты:
- ✅ `version: 3.8` - используйте Python 3.8 (не 3.11)
- ✅ `requirementsPath: requirements.txt` - правильное поле для зависимостей
- ✅ `scriptName: echobot.py` - имя основного файла бота
- ✅ `containerPort: 80` - порт контейнера
- ❌ НЕ используйте `command: python echobot.py` - это не работает
- ❌ НЕ используйте `env:` секцию - переменные настраиваются в панели Amvera

## Локальная разработка

### 1. Установка зависимостей
```bash
pip install -r requirements.txt
```

### 2. Создание бота в Telegram
1. Найдите @BotFather в Telegram
2. Отправьте команду `/newbot`
3. Следуйте инструкциям для создания бота
4. Скопируйте полученный токен

### 3. Настройка токена
Создайте файл `.env` в корне проекта:
```
BOT_TOKEN=ваш_токен_бота_здесь
```

### 4. Запуск бота
```bash
python echobot.py
```

## Развертывание на Amvera

### 1. Подготовка проекта
- Убедитесь, что `amvera.yaml` имеет правильную конфигурацию (см. выше)
- Проверьте, что `echobot.py` находится в корне проекта
- Убедитесь, что `requirements.txt` содержит все зависимости

### 2. Создание бота в Telegram
1. Найдите @BotFather в Telegram
2. Отправьте команду `/newbot`
3. Получите токен бота

### 3. Настройка в Amvera
1. Создайте приложение на Amvera
2. Привяжите Git репозиторий
3. **В настройках приложения добавьте переменную окружения:**
   - Имя: `BOT_TOKEN`
   - Значение: ваш токен бота

### 4. Запуск
- Amvera автоматически соберет и запустит приложение
- Проверьте логи в панели управления

## Структура проекта

```
echobot/
├── echobot.py          # Основной файл бота
├── requirements.txt     # Зависимости Python
├── amvera.yaml         # ⚠️ КРИТИЧЕСКИ ВАЖНО - правильная конфигурация
├── config.example      # Пример конфигурации для локальной разработки
├── .env                # Файл с токеном (создается пользователем, не коммитится в Git)
└── README.md           # Документация
```

## Безопасность

- Токен бота хранится в файле `.env` (не коммитится в Git)
- Для Amvera токен настраивается через переменные окружения в панели управления
- Файл `.env` добавлен в `.gitignore`

## Устранение неполадок

### Проблема: "BOT_TOKEN не найден"
**Решение:** Добавьте переменную `BOT_TOKEN` в настройках приложения Amvera

### Проблема: Ошибка сборки
**Решение:** Проверьте, что `amvera.yaml` имеет правильную конфигурацию (см. выше)

### Проблема: Бот не запускается
**Решение:** 
1. Проверьте логи в панели Amvera
2. Убедитесь, что токен правильный
3. Проверьте, что `echobot.py` находится в корне проекта

## Рабочая версия

✅ **Эта версия протестирована и работает на Amvera**
- Версия: 1.0.0
- Статус: Рабочая
- Дата тестирования: 2025 